<!DOCTYPE html>
<html>
<head>
    <title>Flow Components</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <style>
        body { font-family: Arial, sans-serif; }
        .diagram { margin: 20px; }
    </style>
</head>
<body>
    <h1>Flow Components</h1>
    <div class="diagram">
        <pre class="mermaid">
graph TD
    %% Style Definitions
classDef process fill:#E3F2FD,stroke:#333,stroke-width:1px
classDef decision fill:#FFEB3B,stroke:#333,stroke-width:2px

    %% Main Flow
    subgraph "Staking Process"
        SP[Staking Program]:::process
        SP -->|"User Deposits"| D1{Check User Status}:::decision

        D1 -->|"New User"| P1[Create Account]:::process
        D1 -->|"Existing User"| P2[Verify Account]:::process

        P1 --> A1[User Account]:::process
        P2 --> A1

        A1 -->|"Deposit"| D2{Check Balance}:::decision
        D2 -->|"Insufficient"| P3[Request More]:::process
        D2 -->|"Sufficient"| P4[Create Stake]:::process

        P4 --> P5[Create PDA]:::process
        P5 --> PDA1[Staking PDA]:::process

        PDA1 -->|"Calculate Rewards"| D3{Check Rewards}:::decision
        D3 -->|"No Rewards"| P6[Wait Epoch]:::process
        D3 -->|"Has Rewards"| P7[Claim Rewards]:::process
    end

    %% Error Handling
    subgraph "Error Paths"
        E1[Error]:::process
        E2[Retry]:::process
    end

    %% Legend
    subgraph "Legend"
        L1[Process]:::process
        L2[Decision]:::decision
        L3[Error Path]
    end
        </pre>
    </div>
</body>
</html>
